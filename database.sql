-- H2 2.1.214; 
;              
CREATE USER IF NOT EXISTS "SA" SALT '6761b57a4910e95a' HASH '4e8506ffbc0ed63392e52dd6a2b5250f93e1093f03d6628731ed720ea939b3ac' ADMIN;          
CREATE SEQUENCE "PUBLIC"."TODO_SEQ" START WITH 1 RESTART WITH 101 INCREMENT BY 50;             
CREATE CACHED TABLE "PUBLIC"."TODO"(
    "ID" BIGINT NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255),
    "DONE" BOOLEAN,
    "DUE_DATE" TIMESTAMP(6),
    "SUMMARY" CHARACTER VARYING(255)
);              
ALTER TABLE "PUBLIC"."TODO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");          
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.TODO;     
INSERT INTO "PUBLIC"."TODO" VALUES
(1, NULL, NULL, NULL, 'Test'),
(2, 'Descripcion detallada', NULL, NULL, 'Test detallado'),
(3, U&'Todo a\00f1adido por la API rest', TRUE, NULL, 'Nuevo Todo'),
(4, U&'Todo a\00f1adido por la API rest', TRUE, NULL, 'Nuevo Todo');        
CREATE CACHED TABLE "PUBLIC"."CART"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "USER_ID" BIGINT
);           
ALTER TABLE "PUBLIC"."CART" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("ID");          
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.CART;     
INSERT INTO "PUBLIC"."CART" VALUES
(1, 1),
(2, 2);             
CREATE CACHED TABLE "PUBLIC"."CART_PRODUCTS"(
    "CART_ID" BIGINT NOT NULL,
    "NUMBER" INTEGER,
    "PRODUCT_ID" BIGINT NOT NULL
);         
ALTER TABLE "PUBLIC"."CART_PRODUCTS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_3" PRIMARY KEY("CART_ID", "PRODUCT_ID");              
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.CART_PRODUCTS;            
CREATE CACHED TABLE "PUBLIC"."PRODUCT"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 14) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "PRICE" FLOAT(53) NOT NULL
);          
ALTER TABLE "PUBLIC"."PRODUCT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_18" PRIMARY KEY("ID");      
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.PRODUCT;  
INSERT INTO "PUBLIC"."PRODUCT" VALUES
(9, 'Shoes', 70.0),
(10, 'Shirt', 10.0),
(11, 'Shorts', 10.0),
(12, 'Trousers', 17.5);   
CREATE CACHED TABLE "PUBLIC"."USERS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "PASSWORD" CHARACTER VARYING(255),
    "ROLE" CHARACTER VARYING(255),
    "USERNAME" CHARACTER VARYING(255)
);               
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID");         
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.USERS;    
INSERT INTO "PUBLIC"."USERS" VALUES
(1, '$2a$10$cyaa6KHoqhCfAPH8wr8fnO9g/BJ45RCFphYC6JOc.haWsr16brre.', 'admin', 'admin'),
(2, '$2a$10$kBV6/s5gbDzk4FSboWdfNur8Djy14VR.h64LjFkqzaThGF/nX2O0m', 'user', 'user');
ALTER TABLE "PUBLIC"."CART" ADD CONSTRAINT "PUBLIC"."UK_9EMLP6M95V5ER2BCQKJSW48HE" UNIQUE("USER_ID");          
ALTER TABLE "PUBLIC"."CART" ADD CONSTRAINT "PUBLIC"."FKG5UHI8VPSUY0LGLOXK2H4W5O6" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") NOCHECK;            
ALTER TABLE "PUBLIC"."CART_PRODUCTS" ADD CONSTRAINT "PUBLIC"."FKNLHJC091RDU9K5C8U9XWP280W" FOREIGN KEY("CART_ID") REFERENCES "PUBLIC"."CART"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."CART_PRODUCTS" ADD CONSTRAINT "PUBLIC"."FKH72X9G1EXPJJCNYXGLWHBV4XU" FOREIGN KEY("PRODUCT_ID") REFERENCES "PUBLIC"."PRODUCT"("ID") NOCHECK;              
